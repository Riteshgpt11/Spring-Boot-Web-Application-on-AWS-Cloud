  branches:
  only:
  - assignment7

language: java
jdk:
  - oraclejdk8
services:
  - mysql

##test:
  ##adapter: mysql2
  #database: user_database
  #username: travis
  #encoding: utf8

#before_install:
 # - mysql -e 'CREATE DATABASE IF NOT EXISTS user_database;'
env:
  CATALINA_BASE=/home/travis

sudo: false
install: true

script:
  - ./gradlew build
  #- ./gradlew test --info

after_success:
  - mkdir codedeploy
  - zip -r WEB_APPLICATION.zip build/libs/ROOT.war appsec.yml
  - ls -al
  - mv WEB_APPLICATION.zip codedeploy/
  - ls -al
  - pwd
  - cd codedeploy
  - pwd
  - ls -al

before_deploy:
  - cd ..
  - ls -al
  - pwd

deploy:
- provider: s3
  access_key_id: AKIAJO6XPZC7EQMR6CQA
  secret_access_key:
    secure: "l6jMwFKoOPjG9UNMZE3DPa9O4CePSS2wiuZBy9YqiKHow87KzKcTHbHdlf6218r0FBn2OLLcFFQ477KDyj+JGIUv5PPIxTE2yRddCoOVb4miWS0H1qACL2GibpojM2c/t5Tt8hQs06U4LK5ndq29CY44/fJ3WqjU94SehHR14wFxbSXRnBbNK8ZMe7b4xwez0etw9m51QixICN9+chGpoN+1R1vUNY8pOcrDMoVoCltHnCBxHktMumRivC8P2F77jfc98A3RUmUaZYaz3rFecDOf6i507D7miKWk0eWGysrTKV0FmXDpcM9HM/2h3CWJ+3G/W5PHMZjYuBQ46lLL9c+Vdpmz+jdx/gHDpXaUp8644tRBZHyEGtmjTckIjy5ZAx6aiZtLm63Tr+fQHhY74nlzk7mDv0dCGShvpvQEJdY8Y4vC5vMusqvOpsLaRJxBko+GA/vTV6buX1Q8DRXdL7bws0nWEWH9TGI8U3e5x4Af22+fTkgilxWYurJOe41bBZdM0I7WTW1LR7OgQSPCRWCdT3i69ndv5EdUXjJ0eo9j0gxLYIf7AJhqrZ9BN54dAz02q5ll1GuHtX2Ft7y5kpP9BbeTg1VymjbuI2F2WU3JTTMxmOrDVmuJtVs+8zf0HaH2ekJvs5OTrwsON3IJg5vScUUc/zmmtttQwcbnr20="
  local_dir: codedeploy
  bucket: code-deploy.csye6225-fall2017-magarer.me
  region: us-east-1
  skip_cleanup: true

  #- provider: codedeploy
  #  access_key_id:
  #  bucket:
  #  key:
  #  bundle type: zip
  #application: WebApplication
   #deployement_group: WebApplication
- provider: codedeploy
  access_key_id: AKIAJO6XPZC7EQMR6CQA
  bucket: code-deploy.csye6225.com
  key: WEB_APPLICATION.zip
  bundle_type: zip
  application: WEB_APPLICATION
  deployment_group: WEB_APPLICATION
  region: us-east-1
  secret_access_key:
    secure: "l6jMwFKoOPjG9UNMZE3DPa9O4CePSS2wiuZBy9YqiKHow87KzKcTHbHdlf6218r0FBn2OLLcFFQ477KDyj+JGIUv5PPIxTE2yRddCoOVb4miWS0H1qACL2GibpojM2c/t5Tt8hQs06U4LK5ndq29CY44/fJ3WqjU94SehHR14wFxbSXRnBbNK8ZMe7b4xwez0etw9m51QixICN9+chGpoN+1R1vUNY8pOcrDMoVoCltHnCBxHktMumRivC8P2F77jfc98A3RUmUaZYaz3rFecDOf6i507D7miKWk0eWGysrTKV0FmXDpcM9HM/2h3CWJ+3G/W5PHMZjYuBQ46lLL9c+Vdpmz+jdx/gHDpXaUp8644tRBZHyEGtmjTckIjy5ZAx6aiZtLm63Tr+fQHhY74nlzk7mDv0dCGShvpvQEJdY8Y4vC5vMusqvOpsLaRJxBko+GA/vTV6buX1Q8DRXdL7bws0nWEWH9TGI8U3e5x4Af22+fTkgilxWYurJOe41bBZdM0I7WTW1LR7OgQSPCRWCdT3i69ndv5EdUXjJ0eo9j0gxLYIf7AJhqrZ9BN54dAz02q5ll1GuHtX2Ft7y5kpP9BbeTg1VymjbuI2F2WU3JTTMxmOrDVmuJtVs+8zf0HaH2ekJvs5OTrwsON3IJg5vScUUc/zmmtttQwcbnr20="
  wait-until-deployed: true


notifications:
  email:
    recipients:
      - jain.yo@husky.neu.edu
      - magare.r@husky.neu.edu
      - shetty.pr@husky.neu.edu
      - gupta.rite@husky.neu.edu
